{"ast":null,"code":"// src/components/items/ItemList.js\nimport React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ItemList(){const[items,setItems]=useState([]);const[selectedCategory,setSelectedCategory]=useState('');// Novo estado para a categoria selecionada\nconst apiUrl='http://localhost:8000';const categories=[\"\",\"Serviço\",\"Insumo\"];// Adicione aqui as categorias que você quer exibir\nconst handleCategoryChange=event=>{setSelectedCategory(event.target.value);};useEffect(()=>{const fetchItems=async()=>{let url=\"\".concat(apiUrl,\"/items\");if(selectedCategory){url=\"\".concat(apiUrl,\"/items/categoria/\").concat(selectedCategory);}try{const response=await fetch(url);if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();setItems(data);}catch(error){console.error(\"Erro ao buscar itens:\",error);}};fetchItems();},[selectedCategory]);// O efeito roda novamente quando 'selectedCategory' muda\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Lista de Servi\\xE7os e Insumos\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Filtrar por Categoria: \"}),/*#__PURE__*/_jsx(\"select\",{id:\"category\",value:selectedCategory,onChange:handleCategoryChange,children:categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category===\"\"?\"Todas\":category},category))})]}),items.length>0?/*#__PURE__*/_jsx(\"ul\",{children:items.map(item=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/items/\".concat(item.id),children:[item.descricao,\" - \",item.unidade,\" - R$ \",item.preco.toFixed(2)]})},item.id))}):/*#__PURE__*/_jsx(\"p\",{children:\"Carregando itens...\"})]});}export default ItemList;","map":{"version":3,"names":["React","useState","useEffect","Link","jsx","_jsx","jsxs","_jsxs","ItemList","items","setItems","selectedCategory","setSelectedCategory","apiUrl","categories","handleCategoryChange","event","target","value","fetchItems","url","concat","response","fetch","ok","Error","status","data","json","error","console","children","htmlFor","id","onChange","map","category","length","item","to","descricao","unidade","preco","toFixed"],"sources":["D:/Users/Guilherme/Downloads/c apagar/dias render/base de dados sinapi/sinapi_processor - fase 2/react-sinapi-app/src/components/items/ItemList.js"],"sourcesContent":["// src/components/items/ItemList.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction ItemList() {\r\n  const [items, setItems] = useState([]);\r\n  const [selectedCategory, setSelectedCategory] = useState(''); // Novo estado para a categoria selecionada\r\n  const apiUrl = 'http://localhost:8000';\r\n\r\n  const categories = [\"\", \"Serviço\", \"Insumo\"]; // Adicione aqui as categorias que você quer exibir\r\n\r\n  const handleCategoryChange = (event) => {\r\n    setSelectedCategory(event.target.value);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchItems = async () => {\r\n      let url = `${apiUrl}/items`;\r\n      if (selectedCategory) {\r\n        url = `${apiUrl}/items/categoria/${selectedCategory}`;\r\n      }\r\n\r\n      try {\r\n        const response = await fetch(url);\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        const data = await response.json();\r\n        setItems(data);\r\n      } catch (error) {\r\n        console.error(\"Erro ao buscar itens:\", error);\r\n      }\r\n    };\r\n\r\n    fetchItems();\r\n  }, [selectedCategory]); // O efeito roda novamente quando 'selectedCategory' muda\r\n\r\n  return (\r\n    <div>\r\n      <h2>Lista de Serviços e Insumos</h2>\r\n      <div>\r\n        <label htmlFor=\"category\">Filtrar por Categoria: </label>\r\n        <select id=\"category\" value={selectedCategory} onChange={handleCategoryChange}>\r\n          {categories.map(category => (\r\n            <option key={category} value={category}>{category === \"\" ? \"Todas\" : category}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      {items.length > 0 ? (\r\n        <ul>\r\n          {items.map(item => (\r\n            <li key={item.id}>\r\n              <Link to={`/items/${item.id}`}>{item.descricao} - {item.unidade} - R$ {item.preco.toFixed(2)}</Link>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      ) : (\r\n        <p>Carregando itens...</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ItemList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}